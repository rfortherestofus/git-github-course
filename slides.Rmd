---
title: "Using Git and GitHub with R"
output:
  xaringan::moon_reader:
    css: ["style.css", "default"]
    lib_dir: libs
    df_print: paged
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: 16:9
---

```{r child = "setup.Rmd"}
```

class: dk-section-title, inverse, middle, center

background-image:url("images/bg-github.jpg")

# Introduction to Git and GitHub

???

I show things as much as possible within R and not at the command line

---

class: dk-section-title, inverse, middle, center

background-image:url("images/bg-confused.jpg")

## What is Git?<br>What is GitHub

---

class: middle

--

.pull-left[
![](images/git-logo.svg)
]

--

.pull-right[
![](images/github-logo.svg)

]


---

class: middle

![](images/git-github-not-the-same.svg)

???

They're not the same thing

You can use one without the other

TODO: Image of Git vs GitHub

---

### Git

--

Version control system **on your local computer**

--

Allows you to take **snapshots** of your code as it progresses

--

Allows you to view the **history of your code over time**


---

class: middle, center

![](images/git-visual.svg)


---

### GitHub


![](images/github-website.png)

???

Just pan on GH website

---

### GitHub Alternatives

![](images/bitbucket.png)

---

### GitHub Alternatives

![](images/gitlab-bitbucket.png)

???

Just pan on GitLab and BitBucket websites


---

class: dk-section-title, inverse, middle, center

background-image:url("images/bg-workstation.jpg")

## Why Should You Learn to Use Git and GitHub?

---

class: center, middle

### Version Control

--

![](images/git-visual.svg)

---

class: center, middle

### Backup

--


![](images/git-and-rstudio.svg)
---

class: center, middle

### Backup

![](images/git-and-rstudio-in-sync.svg)

---

class: center, middle

### Collaboration

--

![](images/git-collaboration1.svg)

---

class: center, middle

### Collaboration

![](images/git-collaboration2.svg)

---

class: center, middle

### Collaboration

![](images/git-collaboration3.svg)

---

class: center, middle

### Collaboration

![](images/git-collaboration4.svg)

---

class: dk-section-title, inverse, middle, center

background-image:url("images/bg-setup.jpg")

## Update Everything



---

class: center, middle

![](images/setup-90pct.svg)


---

class: center, middle

[![](images/download-r.png)](https://cran.microsoft.com)

---

class: center, middle

[![](images/download-rstudio.png)](https://www.rstudio.com/products/rstudio/download/)

---

class: center, middle

![](images/update-packages.png)
---

class: inverse

# Your Turn

--

1. Update R

--

1. Update RStudio

--

1. Update all of your R packages



---

class: dk-section-title, inverse, middle, center

background-image:url("images/bg-git.jpg")

# Git

---

## Install Git

--

[![](images/download-git.png)](http://git-scm.com/downloads)


---

class: inverse

# Your Turn

--

1. Install Git

--

1. Confirm that you installed Git correctly by going to your terminal in RStudio and typing `git --version` (you should have version 2.3 or later)

---

## Configure Git

--

Let's tell Git who we are!

--


```{r eval = FALSE}
install.packages("usethis") # Only if usethis is not installed
library(usethis)
use_git_config(user.name = "Jane Doe", user.email = "jane@example.org")
```


???

Explain that you can do lots of things on command line, but I'm showing how not to do so

---

class: inverse

### Your Turn

--

1. Configure Git by adding a user name and email to your profile

---

## Create a Local Git Repository

--

```{r}
use_git()
```

---

class: center, middle

![](images/git-activated.svg)

---

class: inverse

### Your Turn

--

1. Create a new RStudio project called `local-first`

--

1. Add a new Git repository to your project

--

1. Make sure the Git tab shows up in the top right panel

---

## Commits

???

Commits are a snapshot of your code at any point

Staging files

Commit messages

---

## Commits are Snapshots

--

![](images/git-visual.svg)

---

## Commits Have Two Parts

--

Part 1: Files you **stage** (i.e. include) 

--

Part 2: A **commit message** that tells you what has changed since the last commit

---

### Staging Files

--

Which files do you want to include in this commit? 

--

Include all files for now

--

![](images/stage-files.svg)

---

### Commit Messages

---

class: center, middle

![](images/final-docx.svg)

---

class: center, middle

![](images/no-version-info.svg)

---

class: dk-section-title, inverse, middle, center

background-image:url("images/bg-whisper.jpg")

### Commit Messages Tell Us What Changes Were Made

---

class: center, middle

![](images/commit-message.svg)

---

class: inverse

### Your Turn

--

1. Create a new file called README.md in your `local-first` project and add text

--

1. Go to the Git tab and hit the commit button

--

1. Check the staged button next to your new README.md file (and any other modified files)

--

1. Add a commit message (e.g. "Add README file")

--

1. Click the commit button

---

class: dk-section-title, inverse, middle, center


background-image:url("images/bg-time-travel.jpg")

## Commit History

---

![](images/rstudio-review-changes.svg)

???

Explain that we make commit message to know what's different at this point

Show just in RStudio

Explain diffs


---

class: inverse

### Your Turn

--

1. Add some additional text to your README.md

--

1. Commit your changes (make sure to stage your README.md file and add a commit message)

--

1. View the history of your repository

--

1. Make sure you understand the commit history (top section) and the diff (bottom section)

--

1. View your README.md at a previous commit by clicking on "View file ..."

---


class: dk-section-title, inverse, middle, center

background-image:url("images/bg-github.jpg")

# GitHub

---


## GitHub Repositories

--

aka "repo"

--

One repository for each project

---


![](images/bg-github-repo.png)



---


## GitHub Commit History

--

![](images/github-commit-history.png)

---

class: center, middle

### View Commit History on RStudio or GitHub

![](images/commit-history-rstudio-github.svg)

---

class: center, middle

### View Commit History on RStudio or GitHub

![](images/commit-history-rstudio-github-same-thing.svg)


???

Same as viewing locally but you can also see code as it was at any point

---

### View Past Versions of Code

--

![](images/github-past-versions.svg)

---

class: inverse

### Your Turn

--

1. Open the [GitHub repository with the materials for this course](https://github.com/rfortherestofus/git-github-course)

--

1. Click on commits

--

1. Take a look through the commit history to see how the code changed over time


---

class: dk-section-title, middle, center

background-image:url("images/bg-in-sync.jpg")


# Keep RStudio and GitHub in Sync


---


## Connect RStudio and GitHub

---

class: center, middle

![](images/git-and-rstudio-in-sync.svg)

---

### Create a GitHub Account

---

![](images/github-signup.svg)

???

Show me on the website signing up

---

### Create a Personal Access Token (PAT)

```{r}
create_github_token()
```


---

### Connect RStudio and GitHub

```{r}
install.packages("gitcreds") # Only if gitcreds is not installed
library(gitcreds)
gitcreds_set()
```


---

class: inverse

### Your Turn

--

1. Create a GitHub account

--

1. Create a GitHub personal access token (PAT) using the `create_github_token()` function from the `usethis` package

--

1. Register your PAT using the `gitcreds_set()` function from the `gitcreds` package

---

class: center, middle, inverse

## Keeping RStudio and GitHub in Sync

---

## Two Options

<br>

--

![](images/github-to-rstudio.svg)

--
<br><br>

![](images/rstudio-to-github.svg)

---

## Push an RStudio Project to a GitHub Repository

![](images/rstudio-to-github.svg)

---

### Step 1: Initialize a **local** git repository in your RStudio project

```{r}
use_git()
```

---

### Step 2: Connect your local RStudio project to a **remote GitHub repository**

```{r}
use_github()
```



---

class: inverse

### Your Turn

--

1. Open the `local-first` project you created previously

--

1. Push your `local-first` project to GitHub using the `use_github()` function from the `usethis` package

---

## Pull a GitHub Repository to an RStudio Project

<br><br>
![](images/github-to-rstudio.svg)

---

### Step 1: Create a New Repository on GitHub

---

class: middle, center

[![](images/github-new-repo.png)](https://github.com/new)

---

### Step 2: Create a New RStudio Project by Cloning a GitHub Repository

.center[
  ![](images/clone-repo.png)
]


---

class: inverse

### Your Turn

--

1. Create a new repository on GitHub called `github-first`

--

1. Create a new project in RStudio by cloning the `github-first` GitHub repository you just created


---

## Pushing and Pulling Between RStudio and GitHub

--

1. Work in RStudio

--

1. Any time you make significant changes, stage and commit

--

1. Push your work to GitHub

???

- Talk about staging, commits again

- Finish off by saying you don't need to pull if you're the only one working on the project, but this becomes necessary when you collaborate

---



class: inverse

### Your Turn

--

1. Make some changes to the README.md in the `github-first` project

--

1. Stage this file (and any other modified files) and add a commit message

--

1. Hit commit

--

1. After you commit, push your changes to GitHub

--

1. Go to your GitHub repository and make sure you see your changes

---


class: dk-section-title, inverse, middle, center

background-image:url("images/bg-pair-programming.jpg")

# Collaborating with GitHub

---

## Many People Can Work on One Repository

---

class: center, middle

![](images/git-collaboration4.svg)

---

class: center, middle

[![](images/multiple-collaborators.svg)](https://github.com/rfortherestofus/api-food-asset-map/commits/main)

---

## Merge Conflicts

This is not unique to Git/GitHub

--

![](images/dropbox-conflicted-copy.webp)

---

### Merge Conflicts

When you and a collaborator edit the same code

???

How do we avoid them? See next steps.

---

## Always Pull Before Pushing

---

## Push Early and Often

---

## Dealing with Merge Conflicts

---

# Project Management with GitHub

---

## GitHub Issues

---

### Assign Issues to Individuals

---

### Reference Commits in Issues

---

## Work on Your Code Without Messing Up Things that are Working

---

## Branches

---

## Pull Requests

---

# Cool Stuff You Can Do with GitHub

